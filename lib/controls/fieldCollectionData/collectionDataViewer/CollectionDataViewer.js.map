{"version":3,"sources":["controls/fieldCollectionData/collectionDataViewer/CollectionDataViewer.tsx"],"names":[],"mappings":"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","file":"controls/fieldCollectionData/collectionDataViewer/CollectionDataViewer.js","sourcesContent":["import * as React from 'react';\r\nimport styles from '../FieldCollectionData.module.scss';\r\nimport { ICollectionDataViewerProps, ICollectionDataViewerState } from '.';\r\nimport { CollectionDataItem } from '../collectionDataItem';\r\nimport { PrimaryButton, DefaultButton } from 'office-ui-fabric-react/lib/components/Button';\r\nimport { Icon } from 'office-ui-fabric-react/lib/components/Icon';\r\nimport * as strings from 'ControlStrings';\r\nimport { cloneDeep, sortBy, isEmpty, findIndex } from '@microsoft/sp-lodash-subset';\r\nimport { Pagination } from '../../pagination';\r\nimport { TextField } from 'office-ui-fabric-react/lib/TextField';\r\nimport { Guid } from '@microsoft/sp-core-library';\r\n\r\nexport class CollectionDataViewer extends React.Component<ICollectionDataViewerProps, ICollectionDataViewerState> {\r\n  private readonly SORT_IDX = \"sortIdx\";\r\n\r\n  constructor(props: ICollectionDataViewerProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      crntItems: [],\r\n      inCreationItem: null,\r\n      validation: {},\r\n      currentPage: 1\r\n    };\r\n  }\r\n\r\n  /**\r\n   * componentDidMount lifecycle hook\r\n   */\r\n  public componentDidMount(): void {\r\n    let crntItems = this.props.value ? sortBy(cloneDeep(this.props.value), this.SORT_IDX) : [];\r\n    crntItems = crntItems.map((item, idx) => {\r\n      if (!item[this.SORT_IDX]) {\r\n        item[this.SORT_IDX] = idx + 1;\r\n      }\r\n      if (!item.uniqueId) {\r\n        item.uniqueId = Guid.newGuid();\r\n      }\r\n      return item;\r\n    });\r\n    // Update the sort propety\r\n    crntItems = this.updateSortProperty(crntItems);\r\n    this.setState({\r\n      crntItems: sortBy(crntItems, this.SORT_IDX)\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add a new item to the collection\r\n   */\r\n  private addItem = (item: any) => {\r\n    if (!item.uniqueId) {\r\n      item.uniqueId = Guid.newGuid();\r\n    }\r\n    this.setState((prevState: ICollectionDataViewerState): ICollectionDataViewerState => {\r\n      let crntItems = [...prevState.crntItems, item];\r\n      crntItems = this.updateSortProperty(crntItems);\r\n      const pagesCount = this.getPagesCount(crntItems);\r\n      const currentPage = pagesCount < 1 ? 1 : pagesCount;\r\n      return {\r\n        crntItems,\r\n        inCreationItem: null,\r\n        currentPage\r\n      };\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove an item from the collection\r\n   */\r\n  private updateItem = (idx: number, item: any) => {\r\n    this.setState((prevState: ICollectionDataViewerState): ICollectionDataViewerState => {\r\n      const { crntItems } = prevState;\r\n      // Update the item in the array\r\n      crntItems[idx] = item;\r\n      return {\r\n        crntItems,\r\n        currentPage: prevState.currentPage\r\n      };\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove an item from the collection\r\n   */\r\n  private deleteItem = (idx: number) => {\r\n    this.setState((prevState: ICollectionDataViewerState): ICollectionDataViewerState => {\r\n      let { crntItems } = prevState;\r\n      crntItems.splice(idx, 1);\r\n\r\n      // Update the sort propety\r\n      crntItems = this.updateSortProperty(crntItems);\r\n      // Calculate current page\r\n\r\n      const pagesCount = this.getPagesCount(crntItems);\r\n      const currentPage = this.state.currentPage > pagesCount ? pagesCount : this.state.currentPage;\r\n      return {\r\n        crntItems: sortBy(crntItems, this.SORT_IDX),\r\n        currentPage\r\n      };\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Validate every item\r\n   */\r\n  private validateItem = (idx: number, isValid: boolean) => {\r\n    this.setState((prevState: ICollectionDataViewerState) => {\r\n      const { validation } = prevState;\r\n      validation[idx] = isValid;\r\n      return {\r\n        validation: prevState.validation\r\n      };\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if all items are valid\r\n   */\r\n  private allItemsValid() {\r\n    const { validation } = this.state;\r\n    if (validation) {\r\n      const keys = Object.keys(validation);\r\n      for (const key of keys) {\r\n        if (!validation[key]) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Currently in creation\r\n   */\r\n  private addInCreation = (item: any) => {\r\n    this.setState({\r\n      inCreationItem: item\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add the item and save the form\r\n   */\r\n  private addAndSave = () => {\r\n    // Check if the item is not empty\r\n    if (this.state.inCreationItem) {\r\n      this.props.fOnSave([...this.state.crntItems, this.state.inCreationItem]);\r\n    } else {\r\n      this.onSave();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Move an item in the array\r\n   *\r\n   * @param crntItems\r\n   * @param oldIdx\r\n   * @param newIdx\r\n   */\r\n  private moveItemTo(crntItems: any[], oldIdx: number, newIdx: number): any[] {\r\n    if (newIdx > -1 && newIdx < crntItems.length) {\r\n      const removedElement = crntItems.splice(oldIdx, 1)[0];\r\n      if (removedElement) {\r\n        crntItems.splice(newIdx, 0, removedElement);\r\n      }\r\n    }\r\n    return crntItems;\r\n  }\r\n\r\n  /**\r\n   * Update the sort property\r\n   *\r\n   * @param crntItems\r\n   */\r\n  private updateSortProperty(crntItems: any[]): any[] {\r\n    // Update the sort order\r\n    return crntItems.map((item, itemIdx) => {\r\n      item[this.SORT_IDX] = itemIdx + 1;\r\n      return item;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update the sort order\r\n   */\r\n  private updateSortOrder = (oldIdx: number, newIdx: number) => {\r\n    this.setState((prevState: ICollectionDataViewerState) => {\r\n      const { crntItems } = prevState;\r\n      let newOrderedItems = cloneDeep(crntItems);\r\n      newOrderedItems = this.moveItemTo(newOrderedItems, oldIdx, newIdx - 1);\r\n      newOrderedItems = this.updateSortProperty(newOrderedItems);\r\n      newOrderedItems = sortBy(newOrderedItems, this.SORT_IDX);\r\n\r\n      return {\r\n        crntItems: newOrderedItems\r\n      };\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Save the collection data\r\n   */\r\n  private onSave = () => {\r\n    this.props.fOnSave(this.state.crntItems);\r\n  }\r\n\r\n  /**\r\n   * Cancel\r\n   */\r\n  private onCancel = () => {\r\n    this.props.fOnClose();\r\n  }\r\n\r\n  private getPagesCount = (items): number => {\r\n    if (!this.isPagingEnabled()) {\r\n      return 1;\r\n    }\r\n\r\n    return Math.ceil(items.length / this.props.itemsPerPage);\r\n  }\r\n\r\n  private getPageItems = (currentPageIndex = null, currentItems = null) => {\r\n    const { crntItems, currentPage } = this.state;\r\n\r\n    const items = !currentItems ? crntItems : currentItems;\r\n    const pageIndex = !currentPageIndex ? currentPage : currentPageIndex;\r\n\r\n    if (!this.isPagingEnabled || !items) {\r\n      return items;\r\n    }\r\n\r\n    const startIndex = this.getFirstElementIndex(pageIndex, items);\r\n    const endIndex = this.getLastElementIndex(pageIndex, items);\r\n\r\n    return items.slice(startIndex, endIndex);\r\n  }\r\n\r\n  private getFirstElementIndex = (currentPage, crntItems) => {\r\n    const { itemsPerPage } = this.props;\r\n\r\n    if (!crntItems) {\r\n      return null;\r\n    }\r\n    const isPginingEnabled = this.isPagingEnabled();\r\n    if (!isPginingEnabled || currentPage <= 1) {\r\n      return 0;\r\n    }\r\n\r\n    const firstElementIndex = (currentPage - 1) * itemsPerPage;\r\n    return firstElementIndex;\r\n  }\r\n  private getLastElementIndex = (currentPage, crntItems) => {\r\n    const { itemsPerPage } = this.props;\r\n\r\n    if (!crntItems) {\r\n      return null;\r\n    }\r\n\r\n    const isPginingEnabled = this.isPagingEnabled();\r\n    if (!isPginingEnabled) {\r\n      return crntItems.length;\r\n    }\r\n\r\n    const lastElementIndex = currentPage * itemsPerPage > crntItems.length ? crntItems.length : currentPage * itemsPerPage;\r\n    return lastElementIndex;\r\n  }\r\n\r\n  private getCollectionDataItem = (item, idx, allItems) => {\r\n    return <CollectionDataItem\r\n      key={item.uniqueId}\r\n      fields={this.props.fields}\r\n      index={idx}\r\n      item={item}\r\n      totalItems={allItems.length}\r\n      sortingEnabled={this.props.enableSorting}\r\n      disableItemDeletion={this.props.disableItemDeletion}\r\n      fUpdateItem={this.updateItem}\r\n      fDeleteItem={this.deleteItem}\r\n      fValidation={this.validateItem}\r\n      fOnSorting={this.updateSortOrder} />;\r\n  }\r\n\r\n  private isPagingEnabled = (): boolean => {\r\n    const isPagingEnabled = !!this.props.itemsPerPage && this.props.itemsPerPage > 0;\r\n    return isPagingEnabled;\r\n  }\r\n\r\n  private executeItemsFiltering = (items: any[]) => {\r\n    const { executeFiltering } = this.props;\r\n    const { searchFilter } = this.state;\r\n\r\n    if (!items || items.length <= 0) {\r\n      return false;\r\n    }\r\n    if (executeFiltering == null) {\r\n      return false;\r\n    }\r\n    if (isEmpty(searchFilter)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  private getFilteredItems = (items: any[]) => {\r\n    const { executeFiltering } = this.props;\r\n    const { searchFilter } = this.state;\r\n\r\n    return items.filter((item) => { return executeFiltering(searchFilter, item); });\r\n  }\r\n\r\n  /**\r\n   * Default React render\r\n   */\r\n  public render(): React.ReactElement<ICollectionDataViewerProps> {\r\n    let { currentPage, crntItems } = this.state;\r\n\r\n    const isPagingEnabled = this.isPagingEnabled();\r\n\r\n    if (this.executeItemsFiltering(crntItems)) {\r\n      crntItems = this.getFilteredItems(crntItems);\r\n    }\r\n    const pageCount = this.getPagesCount(crntItems);\r\n    const elements = this.getPageItems(currentPage, crntItems);\r\n\r\n    return (\r\n      <div>\r\n        {\r\n          this.props.executeFiltering &&\r\n          <TextField onChanged={(newValue) => { this.setState({ searchFilter: newValue, currentPage: 1 }); }} placeholder={strings.CollectionDataSearch} className=\"FieldCollectionData__panel__search-box\"/>\r\n        }\r\n        <div className={`FieldCollectionData__panel__table ${styles.table} ${this.props.tableClassName || \"\"}`}>\r\n          <div className={`FieldCollectionData__panel__table-head ${styles.tableRow} ${styles.tableHead}`}>\r\n            {\r\n              this.props.enableSorting && (\r\n                <span className={`FieldCollectionData__panel__table-cell ${styles.tableCell}`}></span>\r\n              )\r\n            }\r\n            {\r\n              this.props.fields.map(f => (\r\n                <span key={`dataviewer-${f.id}`} className={`FieldCollectionData__panel__table-cell ${styles.tableCell}`}>{f.title} {f.required && <Icon className={styles.required} iconName=\"Asterisk\" />}</span>\r\n              ))\r\n            }\r\n            <span className={`FieldCollectionData__panel__table-cell ${styles.tableCell}`}></span>\r\n            <span className={`FieldCollectionData__panel__table-cell ${styles.tableCell}`}></span>\r\n          </div>\r\n          {\r\n            (this.state.crntItems && this.state.crntItems.length > 0) &&\r\n            this.state.crntItems.map((item, idx, allItems) => {\r\n              const elementIndex = findIndex(elements, (x: any) => { return x.uniqueId === item.uniqueId; });\r\n              if (elementIndex >= 0) {\r\n                return this.getCollectionDataItem(item, idx, allItems);\r\n              } else {\r\n                return null;\r\n              }\r\n            })\r\n          }\r\n\r\n          {\r\n            !this.props.disableItemCreation && (\r\n              <CollectionDataItem fields={this.props.fields}\r\n                index={null}\r\n                item={null}\r\n                sortingEnabled={this.props.enableSorting}\r\n                totalItems={null}\r\n                fAddItem={this.addItem}\r\n                fAddInCreation={this.addInCreation} />\r\n            )\r\n          }\r\n\r\n        </div>\r\n\r\n        {\r\n          isPagingEnabled && this.state.crntItems && this.state.crntItems.length > 0 &&\r\n          <div className={`FieldCollectionData__panel__pagination`}>\r\n            <Pagination currentPage={currentPage} totalPages={pageCount} onChange={(page: number) => { this.setState({ currentPage: page }); }} />\r\n          </div>\r\n        }\r\n\r\n        {\r\n          (!this.state.crntItems || this.state.crntItems.length === 0) && (\r\n            <p className={`FieldCollectionData__panel__no-collection-data ${styles.noCollectionData}`}>{strings.CollectionDataEmptyValue}</p>\r\n          )\r\n        }\r\n\r\n        <div className={`FieldCollectionData__panel__actions ${styles.panelActions}`}>\r\n          {this.state.inCreationItem && <PrimaryButton text={this.props.saveAndAddBtnLabel || strings.CollectionSaveAndAddButtonLabel} onClick={this.addAndSave} disabled={!this.allItemsValid()} className=\"FieldCollectionData__panel__action__add\" />}\r\n          {!this.state.inCreationItem && <PrimaryButton text={this.props.saveBtnLabel || strings.SaveButtonLabel} onClick={this.onSave} disabled={!this.allItemsValid()} className=\"FieldCollectionData__panel__action__save\" />}\r\n          <DefaultButton text={this.props.cancelBtnLabel || strings.CancelButtonLabel} onClick={this.onCancel} className=\"FieldCollectionData__panel__action__cancel\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\..\\src"}